-
  var pageTitle = page.title || config.subtitle || ""

  if (page.type === "tags") pageTitle = _p("title.tags")
  if (page.type === "categories") pageTitle = _p("title.categories")
  if (is_archive()) pageTitle = _p("title.archives")
  if (is_tag()) pageTitle = _p("title.tags") + ": " + page.tag
  if (is_category()) pageTitle = _p("title.categories") + ": " + page.category
  if (is_month()) pageTitle += ": " + page.year + "/" + page.month
  if (is_year()) pageTitle += ": " + page.year

  pageTitle ? pageTitle += " | " + config.title : pageTitle = config.title

  var pageDescription = page.description || page.title || config.description || ""
  var pageKeywords = [config.author, config.title, config.keywords].filter(i => !!i).join(", ")
  var pageAuthor = config.email ? `${config.author}: ${config.email}` : config.author
  var pageCopyright = config.copyright || config.author

meta(charset="UTF-8")
meta(http-equiv="X-UA-Compatible" content="IE=edge")
meta(name="viewport" content="width=device-width, initial-scale=1")
meta(name="keywords" content=pageKeywords)
meta(name="author" content=pageAuthor)
meta(name="description" content=pageDescription)
meta(name="copyright" content=pageCopyright)
title= pageTitle

meta(name="format-detection" content="telephone=no")
meta(name="apple-mobile-web-app-capable" content="yes")
meta(name="apple-mobile-web-app-status-bar-style" content="black")

if theme.pwa && theme.pwa.enable
  if theme.pwa.theme_color
    meta(name="theme-color" content=theme.pwa.theme_color)

  if theme.pwa.manifest
    link(rel="manifest" href=`${url_for(theme.pwa.manifest)}?v=${stun_env("version")}`)

if theme.favicon.small
  link(rel="icon" href=`${url_for(theme.favicon.small)}?v=${stun_env("version")}` type="image/png" sizes="16x16")

if theme.favicon.medium
  link(rel="icon" href=`${url_for(theme.favicon.medium)}?v=${stun_env("version")}` type="image/png" sizes="32x32")

if theme.favicon.apple_touch_icon
  link(rel="apple-touch-icon" href=`${url_for(theme.favicon.apple_touch_icon)}?v=${stun_env("version")}` sizes="180x180")

if theme.favicon.safari_pinned_tab
  link(rel="mask-icon" href=`${url_for(theme.favicon.safari_pinned_tab)}?v=${stun_env("version")}` color="#54bcff")

if theme.favicon.msapplication
  meta(name="msapplication-TileImage" content=`${url_for(theme.favicon.msapplication)}`)
  meta(name="msapplication-TileColor" content="#000000")

if theme.feed && theme.feed.rss
  link(rel="alternate" href=url_for(theme.feed.rss) type="application/atom+xml")

link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")

- var fontawesome_css = "https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
- if (theme.cdn.fontawesome_css) fontawesome_css = theme.cdn.fontawesome_css
link(rel="stylesheet" href=fontawesome_css type="text/css")

if theme.fancybox
  - var fancybox_css = "https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"
  - if (theme.cdn.fontawesome) fancybox_css = theme.cdn.fontawesome
  link(rel="stylesheet" href=fancybox_css type="text/css")

if page.comments
  if theme.gitalk && theme.gitalk.enable
    - var gitalk_css = "https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css"
    - if (theme.cdn.gitalk_css) gitalk_css = theme.cdn.gitalk_css
    link(rel="stylesheet" href=gitalk_css type="text/css")
  else if theme.gitment && theme.gitment.enable
    - var gitment_css = "https://cdn.jsdelivr.net/npm/gitment/style/default.min.css"
    - if (theme.cdn.gitment_css) gitment_css = theme.cdn.gitment_css
    link(rel="stylesheet" href=gitment_css type="text/css")

if theme.algolia_search.enable
  - var instantsearch_css = "https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"
  - if (theme.cdn.instantsearch_css) instantsearch_css = theme.cdn.instantsearch_css
  link(rel="stylesheet" href=instantsearch_css type="text/css")

link(rel="stylesheet" href=`${url_for(theme.css)}/index.css?v=${stun_env("version")}`)

include ./config.pug
